<!DOCTYPE html>
<html lang="zh-CN">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1">
        <title>OpenCV02 基础 - Influx&#39;s Blog</title><meta name="Description" content="关于 LoveIt 主题"><meta property="og:title" content="OpenCV02 基础" />
<meta property="og:description" content="一、开始使用 1. 头文件 OpenCV中的C&#43;&#43;类和函数都是定义在命名空间cv之内的，有两种方法可以访问： 第一种是，在代码开头的适当位置，加上us" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://example.com/opencv02_%E5%9F%BA%E7%A1%80/" /><meta property="og:image" content="https://example.com/logo.png"/><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2018-10-01T17:55:28+08:00" />
<meta property="article:modified_time" content="2018-10-01T17:55:28+08:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://example.com/logo.png"/>

<meta name="twitter:title" content="OpenCV02 基础"/>
<meta name="twitter:description" content="一、开始使用 1. 头文件 OpenCV中的C&#43;&#43;类和函数都是定义在命名空间cv之内的，有两种方法可以访问： 第一种是，在代码开头的适当位置，加上us"/>
<meta name="application-name" content="Influx&#39;s Blog">
<meta name="apple-mobile-web-app-title" content="Influx&#39;s Blog"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="https://example.com/opencv02_%E5%9F%BA%E7%A1%80/" /><link rel="prev" href="https://example.com/opencv03_%E6%BB%A4%E6%B3%A2/" /><link rel="next" href="https://example.com/opencv01_mat%E7%B1%BB%E8%AF%A6%E8%A7%A3/" /><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/normalize.css@8.0.1/normalize.min.css"><link rel="stylesheet" href="/css/style.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.13.0/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/animate.css@3.7.2/animate.min.css"><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "OpenCV02 基础",
        "inLanguage": "zh-CN",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https:\/\/example.com\/opencv02_%E5%9F%BA%E7%A1%80\/"
        },"image": ["https:\/\/example.com\/images\/Apple-Devices-Preview.png"],"genre": "posts","keywords": "OpenCV","wordcount":  3112 ,
        "url": "https:\/\/example.com\/opencv02_%E5%9F%BA%E7%A1%80\/","datePublished": "2018-10-01T17:55:28+08:00","dateModified": "2018-10-01T17:55:28+08:00","license": "This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher": {
            "@type": "Organization",
            "name": "xxxx","logo": {
                    "@type": "ImageObject",
                    "url": "https:\/\/example.com\/images\/avatar.png",
                    "width":  512 ,
                    "height":  512 
                }},"author": {
                "@type": "Person",
                "name": "Influx"
            },"description": ""
    }
    </script></head>
    <body header-desktop="fixed" header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('auto' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'auto' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Influx&#39;s Blog"><span class="header-title-pre"><i class='fas fa-paw fa-fw'></i></span>Influx&#39;s Blog</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/"> 所有文章 </a><a class="menu-item" href="/tags/"> 标签 </a><a class="menu-item" href="/categories/"> 分类 </a><a class="menu-item" href="/about/"> 关于 </a><a class="menu-item" href="https://github.com/liuyvjin" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i>  </a><span class="menu-item delimiter"></span><span class="menu-item search" id="search-desktop">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-desktop">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-desktop" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-desktop" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-desktop">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </span><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                    <i class="fas fa-adjust fa-fw"></i>
                </a>
            </div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Influx&#39;s Blog"><span class="header-title-pre"><i class='fas fa-paw fa-fw'></i></span>Influx&#39;s Blog</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><div class="search-wrapper">
                    <div class="search mobile" id="search-mobile">
                        <input type="text" placeholder="搜索文章标题或内容..." id="search-input-mobile">
                        <a href="javascript:void(0);" class="search-button search-toggle" id="search-toggle-mobile" title="搜索">
                            <i class="fas fa-search fa-fw"></i>
                        </a>
                        <a href="javascript:void(0);" class="search-button search-clear" id="search-clear-mobile" title="清空">
                            <i class="fas fa-times-circle fa-fw"></i>
                        </a>
                        <span class="search-button search-loading" id="search-loading-mobile">
                            <i class="fas fa-spinner fa-fw fa-spin"></i>
                        </span>
                    </div>
                    <a href="javascript:void(0);" class="search-cancel" id="search-cancel-mobile">
                        取消
                    </a>
                </div><a class="menu-item" href="/posts/" title="">所有文章</a><a class="menu-item" href="/tags/" title="">标签</a><a class="menu-item" href="/categories/" title="">分类</a><a class="menu-item" href="/about/" title="">关于</a><a class="menu-item" href="https://github.com/liuyvjin" title="GitHub" rel="noopener noreffer" target="_blank"><i class='fab fa-github fa-fw'></i></a><a href="javascript:void(0);" class="menu-item theme-switch" title="切换主题">
                <i class="fas fa-adjust fa-fw"></i>
            </a></div>
    </div>
</header>
<div class="search-dropdown desktop">
    <div id="search-dropdown-desktop"></div>
</div>
<div class="search-dropdown mobile">
    <div id="search-dropdown-mobile"></div>
</div>
<main class="main">
                <div class="container"><div class="toc" id="toc-auto">
            <h2 class="toc-title">目录</h2>
            <div class="toc-content" id="toc-content-auto"></div>
        </div><article class="page single"><h1 class="single-title animated flipInX">OpenCV02 基础</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="https://github.com/liuyvjin" title="Author" target="_blank" rel="noopener noreffer author" class="author"><i class="fas fa-user-circle fa-fw"></i>Influx</a></span>&nbsp;<span class="post-category">收录于 <a href="/categories/opencv/"><i class="far fa-folder fa-fw"></i>OpenCV</a></span></div>
            <div class="post-meta-line"><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime="2018-10-01">2018-10-01</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;约 3112 字&nbsp;
                <i class="far fa-clock fa-fw"></i>&nbsp;预计阅读 7 分钟&nbsp;</div>
        </div><div class="details toc" id="toc-static"  kept="">
                <div class="details-summary toc-title">
                    <span>目录</span>
                    <span><i class="details-icon fas fa-angle-right"></i></span>
                </div>
                <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li><a href="#一开始使用">一、开始使用</a>
      <ul>
        <li><a href="#1-头文件">1. 头文件</a></li>
        <li><a href="#2-cmakeliststxt文件的配置">2. CmakeLists.txt文件的配置</a></li>
      </ul>
    </li>
    <li><a href="#二-图像的读取显示和写入">二、 图像的读取、显示和写入</a>
      <ul>
        <li><a href="#1-图像读取imread">1. 图像读取<code>imread</code></a></li>
        <li><a href="#2-打开窗口namedwindow">2. 打开窗口<code>namedWindow</code></a></li>
        <li><a href="#3-显示图像imshow">3. 显示图像<code>imshow</code></a></li>
        <li><a href="#4-写入图像imwrite">4. 写入图像<code>imwrite</code></a></li>
      </ul>
    </li>
    <li><a href="#三图像的叠加">三、图像的叠加</a>
      <ul>
        <li><a href="#1-设定兴趣区域-roi">1. 设定兴趣区域 ROI</a></li>
        <li><a href="#2-将图像拷贝到roi完成叠加">2. 将图像拷贝到ROI完成叠加</a></li>
        <li><a href="#3-图像线性叠加addweighted">3. 图像线性叠加<code>addweighted</code></a></li>
      </ul>
    </li>
    <li><a href="#四-多通道图像的分离-和-混合">四、 多通道图像的分离 和 混合</a>
      <ul>
        <li><a href="#1-分离通道-split">1. 分离通道 split</a></li>
        <li><a href="#2-合并通道-merge">2. 合并通道 merge</a></li>
      </ul>
    </li>
    <li><a href="#五创建trackbar--图像对比度亮度值调整">五、创建Trackbar &amp; 图像对比度、亮度值调整</a>
      <ul>
        <li><a href="#1-创建trackbar">1. 创建Trackbar</a></li>
        <li><a href="#2-获取当前轨迹条的位置-gettrackbarpos">2. 获取当前轨迹条的位置 getTrackbarPos</a></li>
        <li><a href="#3-亮度和对比度调整">3. 亮度和对比度调整</a></li>
      </ul>
    </li>
  </ul>
</nav></div>
            </div><div class="content" id="content"><h2 id="一开始使用">一、开始使用</h2>
<h3 id="1-头文件">1. 头文件</h3>
<p>OpenCV中的C++类和函数都是定义在命名空间cv之内的，有两种方法可以访问：</p>
<ul>
<li>
<p>第一种是，在代码开头的适当位置，加上<code>usingnamespace cv</code>;这句。</p>
</li>
<li>
<p>另外一种是在使用OpenCV类和函数时，都加入cv::命名空间。不过这种情况难免会不爽，每用一个OpenCV的类或者函数，都要多敲四下键盘写出cv::，很麻烦。[# OpenCV学习笔记]</p>
</li>
</ul>
<p>所以一般开头标配：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="cp">#include</span> <span class="cpf">&lt;iostream&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;opencv2/core/core.hpp&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;opencv2/highgui/highgui.hpp&gt;</span><span class="cp">
</span><span class="cp">#include</span> <span class="cpf">&lt;opencv2/opencv.hpp&gt;</span><span class="cp">
</span><span class="cp"></span><span class="k">using</span> <span class="k">namespace</span> <span class="n">cv</span><span class="p">;</span>
<span class="k">using</span> <span class="k">namespace</span> <span class="n">std</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="2-cmakeliststxt文件的配置">2. CmakeLists.txt文件的配置</h3>
<p>在文件中添加如下两行：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-makefile" data-lang="makefile"><span class="err">find_package(OpenCV</span> <span class="err">REQUIRED)</span>
<span class="err">target_link_libraries(Proj_name</span> <span class="err">${OpenCV_LIBS})</span><span class="c">#Proj_name是工程名
</span></code></pre></td></tr></table>
</div>
</div><h2 id="二-图像的读取显示和写入">二、 图像的读取、显示和写入</h2>
<h3 id="1-图像读取imread">1. 图像读取<code>imread</code></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">Mat</span> <span class="nf">imread</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">filename</span><span class="p">,</span> <span class="n">intflags</span><span class="o">=</span><span class="mi">1</span> <span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><p>第二个参数，int类型的flags，为载入标识，它指定一个加载图像的颜色类型。下面是一些例子：</p>
<blockquote>
<p>Mat image1 = imread(&ldquo;dota.jpg&rdquo;,0); //载入灰度图</p>
<p>Mat image2 = imread(&ldquo;dota.jpg&rdquo;,1); //载入3通道的彩色图像</p>
<p>Mat logo = imread(&ldquo;dota_logo.jpg&rdquo;); //载入3通道的彩色图像</p>
</blockquote>
<h3 id="2-打开窗口namedwindow">2. 打开窗口<code>namedWindow</code></h3>
<p>打开一个窗口，并指定窗口名其实可以直接<code>imshow(&quot;windowname&quot;,image)</code> 来创建窗口+show图像</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="nf">namedWindow</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">winname</span><span class="p">,</span><span class="kt">int</span> <span class="n">flags</span><span class="o">=</span><span class="n">WINDOW_AUTOSIZE</span> <span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>第一个参数，const string&amp;型的name，即填被用作窗口的标识符的窗口名称。</li>
<li>第二个参数，int 类型的flags ，窗口的标识，可以填如下的值：
<ul>
<li>WINDOW_NORMAL设置了这个值，用户便可以改变窗口的大小（没有限制）</li>
<li>WINDOW_AUTOSIZE如果设置了这个值，窗口大小会自动调整以适应所显示的图像，并且不能手动改变窗口大小。</li>
<li>WINDOW_OPENGL 如果设置了这个值的话，窗口创建的时候便会支持OpenGL</li>
</ul>
</li>
</ul>
<p>我们可以调用destroyWindow()或者destroyAllWindows()函数来关闭窗口，并取消之前分配的与窗口相关的所有内存空间。</p>
<p>但其实对于代码量不大的简单小程序来说，完全没有必要手动调用上述的destroyWindow()或者destroyAllWindows()函数，因为在退出时，所有的资源和应用程序的窗口会被操作系统会自动关闭</p>
<h3 id="3-显示图像imshow">3. 显示图像<code>imshow</code></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="nf">imshow</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">winname</span><span class="p">,</span> <span class="n">InputArray</span> <span class="n">mat</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>第一个参数，const string&amp;类型的winname，填需要显示的窗口标识名称。如果没有窗口就新建一个</li>
<li>第二个参数，InputArray 类型的mat，填需要显示的图像。
遇到函数原型中的InputArray类型，我们把它简单地当做Mat类型就行了</li>
</ul>
<p>函数对像素的处理如下：</p>
<ul>
<li>如果载入的图像是8位无符号类型（8-bit unsigned），就显示图像本来的样子。</li>
<li>如果图像是16位无符号类型（16-bit unsigned）或32位整型（32-bit integer），便用像素值除以256。也就是说，值的范围是[0,255 x 256]映射到[0,255]。</li>
<li>如果图像是32位浮点型（32-bit floating-point），像素值便要乘以255。也就是说，该值的范围是[0,1]映射到[0,255]。</li>
</ul>
<h3 id="4-写入图像imwrite">4. 写入图像<code>imwrite</code></h3>
<p>将图像保存到指定的文件。图像格式是基于文件扩展名的</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">bool</span> <span class="nf">imwrite</span><span class="p">(</span><span class="k">const</span> <span class="n">string</span><span class="o">&amp;</span> <span class="n">filename</span><span class="p">,</span> <span class="n">InputArray</span> <span class="n">img</span><span class="p">,</span> <span class="k">const</span>
             <span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;&amp;</span> <span class="n">params</span><span class="o">=</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">()</span> <span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>第一个参数，const string&amp;类型的filename，填需要写入的文件名就行了，带上后缀，比如，“123.jpg”这样。</li>
<li>第二个参数，InputArray类型的img，一般填一个Mat类型的图像数据就行了。</li>
<li>第三个参数，const vector<int>&amp;类型的params，表示为特定格式保存的参数编码，它有默认值vector<int>()，所以一般情况下不需要填写。</li>
</ul>
<h2 id="三图像的叠加">三、图像的叠加</h2>
<h3 id="1-设定兴趣区域-roi">1. 设定兴趣区域 ROI</h3>
<p>相当于在矩阵中取一块出来，类似于python里的切片操作，切片出来的imageROI和原来的image1共享同一块空间。有两种常用方法：</p>
<p>（1）cv::rect  指定矩形区域</p>
<p>指定矩形的左上角坐标（构造函数的前两个参数）和矩形的长宽（构造函数的后两个参数）就可以定义一个矩形区域。</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">Mat</span> <span class="n">imageROI</span><span class="p">;</span> <span class="c1">//定义一个Mat
</span><span class="c1"></span><span class="n">imageROI</span><span class="o">=</span><span class="n">image1</span><span class="p">(</span><span class="n">Rect</span><span class="p">(</span><span class="mi">500</span><span class="p">,</span><span class="mi">250</span><span class="p">,</span><span class="n">logo</span><span class="p">.</span><span class="n">cols</span><span class="p">,</span><span class="n">logo</span><span class="p">.</span><span class="n">rows</span><span class="p">));</span>
</code></pre></td></tr></table>
</div>
</div><p>（2）Range 指定行列的范围</p>
<p>Range是指从起始索引到终止索引（==不包括终止索引==）的一连段连续序列。cv::Range可以用来定义Range对象。如果使用cv::Range来定义ROI，那么前例中定义ROI的代码可以重写为：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">imageROI</span><span class="o">=</span><span class="n">image1</span><span class="p">(</span><span class="n">Range</span><span class="p">(</span><span class="mi">250</span><span class="p">,</span><span class="mi">250</span><span class="o">+</span><span class="n">logoImage</span><span class="p">.</span><span class="n">rows</span><span class="p">),</span><span class="n">Range</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="o">+</span><span class="n">logoImage</span><span class="p">.</span><span class="n">cols</span><span class="p">));</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="2-将图像拷贝到roi完成叠加">2. 将图像拷贝到ROI完成叠加</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="c1">//加载掩模（要和原图logoImage大小相同，通道数要么相同，要么是1通道，而灰度图是单通道的）
</span><span class="c1"></span><span class="n">Mat</span> <span class="n">mask</span> <span class="o">=</span> <span class="n">imread</span><span class="p">(</span><span class="s">&#34;logoImage.jpg&#34;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
<span class="c1">//将logoImage在掩膜过滤下（对应掩膜为0的logoImage的像素被过滤），拷贝到ROI
</span><span class="c1"></span><span class="n">logoImage</span><span class="p">.</span><span class="n">copyTo</span><span class="p">(</span><span class="n">imageROI</span><span class="p">,</span> <span class="n">mask</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="3-图像线性叠加addweighted">3. 图像线性叠加<code>addweighted</code></h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="n">addWeighted</span><span class="p">(</span><span class="n">InputArray</span> <span class="n">src1</span><span class="p">,</span> <span class="kt">double</span> <span class="n">alpha</span><span class="p">,</span>
                  <span class="n">InputArray</span> <span class="n">src2</span><span class="p">,</span> <span class="kt">double</span> <span class="n">beta</span><span class="p">,</span>
                  <span class="kt">double</span> <span class="n">gamma</span><span class="p">,</span> <span class="n">OutputArray</span> <span class="n">dst</span><span class="p">,</span>
                 <span class="kt">int</span> <span class="n">dtype</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span><span class="err">；</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>src1，InputArray类型，表示需要加权的第一个数组，常常填一个Mat。</li>
<li>alpha，表示第一个数组的权重</li>
<li>src2，表示第二个数组，它需要和第一个数组拥有相同的尺寸和通道数。</li>
<li>beta，表示第二个数组的权重值。</li>
<li>dst，输出的数组，它和输入的两个数组拥有相同的尺寸和通道数。</li>
<li>gamma，一个加到权重总和上的标量值。看下面的式子自然会理解。</li>
<li>dtype，输出阵列的可选深度，有默认值-1。当两个输入数组具有相同的深度时，这个参数设置为-1（默认值），即等同于src1.depth（）。</li>
</ul>
<p>上述函数可以用下面的公式来理解：
$$
dst = src_1\times \alpha +src_2\times \beta +\gamma
$$
<a href="https://github.com/Liuyvjin/OpenCV_begin/tree/master/EX1" target="_blank" rel="noopener noreffer">图像叠加—代码</a></p>
<h2 id="四-多通道图像的分离-和-混合">四、 多通道图像的分离 和 混合</h2>
<h3 id="1-分离通道-split">1. 分离通道 split</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="nf">split</span><span class="p">(</span><span class="k">const</span> <span class="n">Mat</span><span class="o">&amp;</span> <span class="n">src</span><span class="p">,</span> <span class="n">Mat</span><span class="o">*</span><span class="n">mvbegin</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">split</span><span class="p">(</span><span class="n">InputArray</span> <span class="n">m</span><span class="p">,</span><span class="n">OutputArrayOfArrays</span> <span class="n">mv</span><span class="p">);</span> <span class="c1">//第二个参数是输出的色彩通道，类型为mat的数组例如 vector&lt;mat&gt; channels(3)，分离成channels.at(1/2/3)
</span></code></pre></td></tr></table>
</div>
</div><h3 id="2-合并通道-merge">2. 合并通道 merge</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">void</span> <span class="nf">merge</span><span class="p">(</span><span class="k">const</span> <span class="n">Mat</span><span class="o">*</span> <span class="n">mv</span><span class="p">,</span> <span class="n">size_t</span> <span class="n">count</span><span class="p">,</span> <span class="n">OutputArray</span> <span class="n">dst</span><span class="p">);</span>
<span class="kt">void</span> <span class="nf">merge</span><span class="p">(</span><span class="n">InputArrayOfArrays</span> <span class="n">mv</span><span class="p">,</span> <span class="n">OutputArray</span> <span class="n">dst</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>mv，填需要被合并的输入矩阵或vector容器的阵列，这个mv参数中所有的矩阵必须有着一样的尺寸和深度。</li>
<li>count，当mv为一个空白的C数组时，代表输入矩阵的个数，这个参数显然必须大于1。</li>
</ul>
<p><a href="https://github.com/Liuyvjin/OpenCV_begin/tree/master/EX2" target="_blank" rel="noopener noreffer">图像的分离和混合—代码</a></p>
<h2 id="五创建trackbar--图像对比度亮度值调整">五、创建Trackbar &amp; 图像对比度、亮度值调整</h2>
<h3 id="1-创建trackbar">1. 创建Trackbar</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="nf">createTrackbar</span><span class="p">(</span><span class="n">conststring</span><span class="o">&amp;</span> <span class="n">trackbarname</span><span class="p">,</span> <span class="n">conststring</span><span class="o">&amp;</span> <span class="n">winname</span><span class="p">,</span>
                   <span class="kt">int</span><span class="o">*</span> <span class="n">value</span><span class="p">,</span> <span class="kt">int</span> <span class="n">max</span><span class="p">,</span> <span class="n">TrackbarCallback</span> <span class="n">onChange</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                   <span class="kt">void</span><span class="o">*</span> <span class="n">userdata</span><span class="o">=</span><span class="mi">0</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><ul>
<li>trackbarname，const string&amp;类型，表示轨迹条的名字，用来代表我们创建的轨迹条。</li>
<li>winname，const string&amp;类型，窗口的名字，表示这个轨迹条会依附到哪个窗口上，即对应namedWindow（）创建窗口时填的某一个窗口名。</li>
<li>value，int* 类型，表示滑块的位置。并且在创建时，滑块的初始位置就是该变量当前的值。程序会把value的指针传给回调函数，同时主程序也可以访问value。</li>
<li>max，int类型，表示滑块可以达到的最大位置的值，0～max。</li>
<li>onChange，TrackbarCallback类型，有默认值0。这是指向回调函数的指针，每次滑块位置改变时，这个函数都会进行回调。并且这个函数的原型必须为<code>void XXX(int,void\*)</code>。其中第一个参数是轨迹条的位置，第二个参数是用户数据（看下面的第六个参数）。如果回调是NULL指针，表示没有回调函数的调用，仅第三个参数value有变化。</li>
<li>userdata，void*类型，有默认值0。这个参数是用户传给回调函数的数据，用来处理轨迹条事件。作为value的补充。</li>
</ul>
<h3 id="2-获取当前轨迹条的位置-gettrackbarpos">2. 获取当前轨迹条的位置 getTrackbarPos</h3>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="kt">int</span> <span class="nf">getTrackbarPos</span><span class="p">(</span><span class="n">conststring</span><span class="o">&amp;</span> <span class="n">trackbarname</span><span class="p">,</span> <span class="n">conststring</span><span class="o">&amp;</span> <span class="n">winname</span><span class="p">);</span>
</code></pre></td></tr></table>
</div>
</div><h3 id="3-亮度和对比度调整">3. 亮度和对比度调整</h3>
<p>亮度和对比度的调整可以由以下公式概括：
$$
g(x,y)=a\times f(x,y)+b
$$</p>
<ul>
<li>参数f(x,y)表示源图像像素。</li>
<li>参数g(x,y) 表示输出图像像素。</li>
<li>参数a（需要满足a&gt;0）被称为增益（gain），常常被用来控制图像的对比度。</li>
<li>参数b通常被称为偏置（bias），常常被用来控制图像的亮度。</li>
</ul>
<p>在程序中可写为</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-cpp" data-lang="cpp"><span class="n">dstImage</span> <span class="o">=</span> <span class="n">srcImage</span> <span class="o">*</span> <span class="n">ContrastValue</span> <span class="o">+</span> <span class="n">BrightValue</span><span class="p">;</span>
</code></pre></td></tr></table>
</div>
</div><p><a href="https://github.com/Liuyvjin/OpenCV_begin/tree/master/EX3" target="_blank" rel="noopener noreffer">用轨迹条调整亮度对比度—代码</a></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
                <span>更新于 2018-10-01</span>
            </div>
            <div class="post-info-license"></div>
        </div>
        <div class="post-info-line">
            <div class="post-info-md"><span>
                            <a class="link-to-markdown" href="/opencv02_%E5%9F%BA%E7%A1%80/index.md" target="_blank">阅读原始文档</a>
                        </span></div>
            <div class="post-info-share">
                <span><a href="javascript:void(0);" title="分享到 Twitter" data-sharer="twitter" data-url="https://example.com/opencv02_%E5%9F%BA%E7%A1%80/" data-title="OpenCV02 基础" data-hashtags="OpenCV"><i class="fab fa-twitter fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Facebook" data-sharer="facebook" data-url="https://example.com/opencv02_%E5%9F%BA%E7%A1%80/" data-hashtag="OpenCV"><i class="fab fa-facebook-square fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Hacker News" data-sharer="hackernews" data-url="https://example.com/opencv02_%E5%9F%BA%E7%A1%80/" data-title="OpenCV02 基础"><i class="fab fa-hacker-news fa-fw"></i></a><a href="javascript:void(0);" title="分享到 Line" data-sharer="line" data-url="https://example.com/opencv02_%E5%9F%BA%E7%A1%80/" data-title="OpenCV02 基础"><i data-svg-src="https://cdn.jsdelivr.net/npm/simple-icons@2.14.0/icons/line.svg"></i></a><a href="javascript:void(0);" title="分享到 微博" data-sharer="weibo" data-url="https://example.com/opencv02_%E5%9F%BA%E7%A1%80/" data-title="OpenCV02 基础"><i class="fab fa-weibo fa-fw"></i></a></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"><i class="fas fa-tags fa-fw"></i>&nbsp;<a href="/tags/opencv/">OpenCV</a></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">返回</a></span>&nbsp;|&nbsp;<span><a href="/">主页</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/opencv03_%E6%BB%A4%E6%B3%A2/" class="prev" rel="prev" title="OpenCV03 滤波"><i class="fas fa-angle-left fa-fw"></i>OpenCV03 滤波</a>
            <a href="/opencv01_mat%E7%B1%BB%E8%AF%A6%E8%A7%A3/" class="next" rel="next" title="OpenCV01 Mat类详解">OpenCV01 Mat类详解<i class="fas fa-angle-right fa-fw"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line">由 <a href="https://gohugo.io/" target="_blank" rel="noopener noreffer" title="Hugo 0.88.1">Hugo</a> 强力驱动 | 主题 - <a href="https://github.com/dillonzq/LoveIt" target="_blank" rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i> LoveIt</a>
                </div><div class="footer-line"><i class="far fa-copyright fa-fw"></i><span itemprop="copyrightYear">2019 - 2021</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="https://github.com/liuyvjin" target="_blank">influx</a></span>&nbsp;|&nbsp;<span class="license"><a rel="license external nofollow noopener noreffer" href="https://creativecommons.org/licenses/by-nc/4.0/" target="_blank">CC BY-NC 4.0</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="回到顶部">
                <i class="fas fa-arrow-up fa-fw"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="查看评论">
                <i class="fas fa-comment fa-fw"></i>
            </a>
        </div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/contrib/copy-tex.min.css"><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/smooth-scroll@16.1.3/dist/smooth-scroll.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/autocomplete.js@0.37.1/dist/autocomplete.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lunr@2.3.8/lunr.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.stemmer.support.min.js"></script><script type="text/javascript" src="/lib/lunr/lunr.zh.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lazysizes@5.2.2/lazysizes.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lightgallery.js@1.2.0/dist/js/lightgallery.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-thumbnail.js@1.2.0/dist/lg-thumbnail.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/lg-zoom.js@1.2.0/dist/lg-zoom.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/clipboard@2.0.6/dist/clipboard.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/sharer.js@0.4.0/sharer.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/katex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/contrib/auto-render.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/contrib/copy-tex.min.js"></script><script type="text/javascript" src="https://cdn.jsdelivr.net/npm/katex@0.13.18/dist/contrib/mhchem.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"复制到剪贴板","maxShownLines":10},"comment":{},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"math":{"delimiters":[{"display":true,"left":"$$","right":"$$"},{"display":true,"left":"\\[","right":"\\]"},{"display":false,"left":"$","right":"$"},{"display":false,"left":"\\(","right":"\\)"}],"strict":false},"search":{"highlightTag":"em","lunrIndexURL":"/index.json","lunrLanguageCode":"zh","lunrSegmentitURL":"/lib/lunr/lunr.segmentit.js","maxResultLength":10,"noResultsFound":"没有找到结果","snippetLength":50,"type":"lunr"}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
